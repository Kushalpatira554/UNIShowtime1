{% extends "base.html" %}

{% block content %}
<div class="max-w-3xl mx-auto p-8 rounded-2xl shadow-2xl relative overflow-hidden" 
     style="background: linear-gradient(135deg, rgba(20, 30, 40, 0.85), rgba(30, 40, 50, 0.85)); backdrop-filter: blur(10px); border: 1px solid rgba(148, 180, 193, 0.3);">
    
    <!-- Decorative elements -->
    <div class="absolute top-0 right-0 w-64 h-64 bg-gradient-to-br from-transparent to-#94B4C1 opacity-10 rounded-bl-full"></div>
    <div class="absolute bottom-0 left-0 w-48 h-48 bg-gradient-to-tr from-transparent to-#ECEFCA opacity-10 rounded-tr-full"></div>
    
    <div class="relative">
    <h2 class="text-3xl font-bold text-center text-gray-400 mb-8 relative inline-block w-full">
        Suggest an Event
        <span class="absolute bottom-0 left-1/4 right-1/4 h-1 bg-gradient-to-r from-transparent via-#94B4C1 to-transparent"></span>
    </h2>

    <!-- Success and Error Messages -->
    {% if messages %}
        <div class="mb-6">
            <div class="p-3 {% if messages.0.tags == 'success' %}bg-green-500/20 text-green-300 border border-green-500/30{% else %}bg-red-500/20 text-red-300 border border-red-500/30{% endif %} rounded-lg text-sm text-center animate-fadeIn backdrop-filter backdrop-blur-sm">
                {% for message in messages %}
                    {{ message }}
                    {% if not forloop.last %}<br>{% endif %}
                {% endfor %}
            </div>
        </div>
    {% endif %}

    <!-- Display form errors -->
    {% if form.errors %}
        <div class="mb-4 bg-red-500/20 text-red-300 rounded-lg p-4 border border-red-500/30 backdrop-filter backdrop-blur-sm">
            <ul>
                {% for field in form %}
                    {% for error in field.errors %}
                        <li>{{ field.name }}: {{ error }}</li>
                    {% endfor %}
                {% endfor %}
            </ul>
        </div>
    {% endif %}

    <div class="mb-6 bg-#547792/20 text-#ECEFCA p-4 rounded-lg border border-#547792/30 backdrop-filter backdrop-blur-sm">
        <p>Have an idea for an event? Suggest it here and our admins will review it!</p>
    </div>

    <form method="POST">
        {% csrf_token %}

        <!-- Event Title -->
        <div class="mb-4">
            <label for="id_title" class="block text-sm font-medium text-gray-400">Event Title</label>
            <input type="text" id="id_title" name="title" class="block w-full px-4 py-3 bg-#213448/80 text-gray-400 border border-#547792/50 rounded-lg focus:ring-2 focus:ring-#94B4C1 focus:border-transparent transition-all duration-300 backdrop-filter backdrop-blur-sm" placeholder="Enter event title" value="{{ form.title.value|default:'' }}" required>
            {% if form.title.errors %}
                <p class="text-red-400 text-xs mt-1 animate-pulse">{{ form.title.errors.0 }}</p>
            {% endif %}
        </div>

        <!-- Event Description -->
        <div class="mb-4">
            <label for="id_description" class="block text-sm font-medium text-gray-400">Event Description</label>
            <textarea id="id_description" name="description" rows="4" class="block w-full px-4 py-3 bg-#213448/80 text-gray-400 border border-#547792/50 rounded-lg focus:ring-2 focus:ring-#94B4C1 focus:border-transparent transition-all duration-300 backdrop-filter backdrop-blur-sm" placeholder="Describe the event" required>{{ form.description.value|default:'' }}</textarea>
            {% if form.description.errors %}
                <p class="text-red-400 text-xs mt-1">{{ form.description.errors.0 }}</p>
            {% endif %}
        </div>

        <!-- Event Category -->
        <div class="mb-4">
            <label for="id_category" class="block text-sm font-medium text-gray-400">Event Category</label>
            <select id="id_category" name="category" class="block w-full px-4 py-3 bg-#213448/80 text-gray-400 border border-#547792/50 rounded-lg focus:ring-2 focus:ring-#94B4C1 focus:border-transparent transition-all duration-300 backdrop-filter backdrop-blur-sm" required>
                <option value="">Select Category</option>
                {% for category_value, category_name in categories %}
                    <option value="{{ category_value }}" {% if form.category.value == category_value %}selected{% endif %}>{{ category_name }}</option>
                {% endfor %}
            </select>
            {% if form.category.errors %}
                <p class="text-red-400 text-xs mt-1">{{ form.category.errors.0 }}</p>
            {% endif %}
        </div>



        <div class="flex flex-col md:flex-row gap-4">
            <button type="submit" class="flex-1 bg-gradient-to-r from-#547792 to-#3A5A7A text-gray-400 font-semibold py-3 rounded-lg hover:from-#3A5A7A hover:to-#213448 transition-all duration-300 transform hover:-translate-y-1 hover:shadow-lg border border-transparent hover:border-#94B4C1/30 flex items-center justify-center group">
                <svg class="w-5 h-5 mr-2 text-gray-400 group-hover:text-#ECEFCA transition-colors duration-300" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 6v6m0 0v6m0-6h6m-6 0H6"></path>
                </svg>
                Submit Suggestion
            </button>
            <a href="{% url 'student_dashboard' %}" class="flex-1 bg-#213448/80 text-gray-400 font-semibold py-3 rounded-lg hover:bg-#547792/50 text-center transition-all duration-300 transform hover:-translate-y-1 hover:shadow-lg border border-#547792/30 hover:border-#94B4C1/30 backdrop-filter backdrop-blur-sm flex items-center justify-center group">
                <svg class="w-5 h-5 mr-2 text-gray-400 group-hover:text-#ECEFCA transition-colors duration-300" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path>
                </svg>
                Cancel
            </a>
        </div>
    </form>
    </div>
</div>

{% endblock %}